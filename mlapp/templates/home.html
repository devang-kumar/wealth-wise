{% extends 'mlapp/base.html' %}
{% load static %}
{% load humanize %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FinanceIP - Financial Predictions</title>
    <link rel="stylesheet" href="{% static 'css/landing.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
</head>
<style>
    :root {
  --primary: #3A80BA;
  --primary-light: rgba(58, 128, 186, 0.1);
  --primary-dark: #2a5d8a;
  --secondary: #4CB5F5;
  --success: #4CAF50;
  --warning: #FFC107;
  --danger: #F44336;
  --gray: #6c757d;
  --gray-light: #e9ecef;
  --dark: #343a40;
  --light: #f8f9fa;
  --bg: #f5f7fa;
  --card: #ffffff;
  --text: #333333;
  --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  --transition: all 0.3s ease;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
  background-color: var(--bg);
  color: var(--text);
  line-height: 1.6;
  overflow-x: hidden;
}

/* Typography */
h1, h2, h3, h4 {
  font-weight: 700;
  line-height: 1.2;
  margin-bottom: 1rem;
}

h1 { font-size: 2.5rem; }
h2 { font-size: 2rem; }
h3 { font-size: 1.5rem; }
h4 { font-size: 1.25rem; }

p {
  margin-bottom: 1rem;
}

.highlight {
  color: var(--primary);
  position: relative;
  display: inline-block;
}

.highlight::after {
  content: '';
  position: absolute;
  bottom: 2px;
  left: 0;
  width: 100%;
  height: 8px;
  background-color: rgba(58, 128, 186, 0.2);
  z-index: -1;
  border-radius: 4px;
}

/* Layout */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1.5rem;
}

/* Hero Section */
.hero-section {
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: white;
  padding: 5rem 0 8rem;
  position: relative;
}

.hero-container {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 2rem;
}

.hero-content {
  flex: 1 1 50%;
  min-width: 300px;
}

.hero-content h1 {
  font-size: 3rem;
  margin-bottom: 1.5rem;
  line-height: 1.2;
}

.hero-content p {
  font-size: 1.25rem;
  margin-bottom: 2rem;
  opacity: 0.9;
}

.hero-image {
  flex: 1 1 40%;
  min-width: 300px;
  position: relative;
}

.hero-image img {
  max-width: 100%;
  border-radius: 16px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
  transform: perspective(1000px) rotateY(-10deg);
  transition: transform 0.5s ease;
}

.hero-image:hover img {
  transform: perspective(1000px) rotateY(0deg);
}

.wave-divider {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  overflow: hidden;
  line-height: 0;
}
.see-more-container {
  margin-top: 50px;
  padding: 12px 24px; /* increased padding */
  border-radius: 30px;
  background: linear-gradient(135deg, #00b4db, #0083b0);
  display: inline-flex; /* to fit the content */
  align-items: center;
  justify-content: center;
  box-shadow: 0 6px 15px rgba(0, 179, 255, 0.3);
  transition: all 0.3s ease;
  cursor: pointer;
  width:150px;
}

.see-more-container:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 20px rgba(0, 179, 255, 0.5);
}

.see-more-btn {
  color: #ffffff;
  text-decoration: none;
  font-weight: 600;
  font-size: 16px;
  line-height: 1.4;
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: color 0.3s ease;
}

.see-more-btn i {
  transition: transform 0.3s ease;
}

.see-more-container:hover .see-more-btn i {
  transform: translateX(5px);
}



.wave-divider svg {
  position: relative;
  display: block;
  width: calc(100% + 1.3px);
  height: 120px;
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.75rem 1.75rem;
  border-radius: 8px;
  font-weight: 600;
  text-decoration: none;
  transition: var(--transition);
  cursor: pointer;
  border: none;
  font-size: 1rem;
  gap: 0.5rem;
}

.btn-primary {
  background-color: white;
  color: var(--primary);
  box-shadow: 0 4px 15px rgba(255, 255, 255, 0.2);
}

.btn-primary:hover {
  background-color: var(--primary-dark);
  color: white;
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(255, 255, 255, 0.3);
}

.btn-secondary {
  background-color: transparent;
  color: white;
  border: 2px solid rgba(255, 255, 255, 0.3);
}

.btn-secondary:hover {
  background-color: rgba(255, 255, 255, 0.1);
  border-color: white;
  transform: translateY(-2px);
}

.btn i {
  font-size: 0.9em;
}

/* Dashboard Preview */
.dashboard-preview {
  padding: 4rem 0;
  position: relative;
  background-color: var(--light);
}

.welcome-header {
  text-align: center;
  margin-bottom: 3rem;
  position: relative;
}

.welcome-header h2 {
  font-size: 2.25rem;
}

.username {
  color: var(--primary);
}

.subtitle {
  color: var(--gray);
  font-size: 1.1rem;
}

.date-display {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background-color: var(--primary-light);
  padding: 0.5rem 1rem;
  border-radius: 50px;
  margin-top: 1rem;
  color: var(--primary);
  font-weight: 500;
}

.date-display i {
  font-size: 0.9em;
}

.stats-summary {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.stat-card {
  background: var(--card);
  border-radius: 12px;
  padding: 1.5rem;
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  box-shadow: var(--shadow);
  transition: var(--transition);
  border-left: 4px solid var(--primary);
}

.stat-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}

.stat-icon {
  font-size: 1.8rem;
  color: var(--primary);
  background-color: var(--primary-light);
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.stat-content {
  flex: 1;
}

.stat-value {
  font-size: 1.8rem;
  font-weight: 700;
  margin: 0.5rem 0;
  color: var(--primary);
}

.progress-bar {
  width: 100%;
  height: 6px;
  background-color: var(--gray-light);
  border-radius: 3px;
  margin-top: 1rem;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(to right, var(--primary), var(--secondary));
  border-radius: 3px;
  transition: width 1s ease;
}

.recent-activity {
  background: var(--card);
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: var(--shadow);
  margin-top: 2rem;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
}

.section-header h3 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 0;
}

.view-all {
  color: var(--primary);
  font-weight: 600;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 0.25rem;
  transition: var(--transition);
}

.view-all:hover {
  gap: 0.5rem;
  color: var(--primary-dark);
}

.predictions-table-container {
  overflow-x: auto;
}

.predictions-table {
  width: 100%;
  border-collapse: collapse;
  background: var(--card);
  border-radius: 8px;
  overflow: hidden;
}

.predictions-table th,
.predictions-table td {
  padding: 1rem;
  text-align: left;
  border-bottom: 1px solid var(--gray-light);
}

.predictions-table th {
  background-color: var(--primary-light);
  color: var(--primary);
  font-weight: 600;
}

.predictions-table tr:last-child td {
  border-bottom: none;
}

.predictions-table tr:hover {
  background-color: var(--primary-light);
}

.savings-cell {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.savings-percent {
  font-size: 0.85rem;
  font-weight: 600;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
}

.savings-percent.positive {
  background-color: rgba(76, 175, 80, 0.1);
}

.savings-percent.neutral {
  background-color: rgba(255, 193, 7, 0.1);
}

.savings-percent.negative {
  background-color: rgba(244, 67, 54, 0.1);
}

.status-badge {
  padding: 0.35rem 0.75rem;
  border-radius: 50px;
  font-size: 0.85rem;
  font-weight: 600;
  display: inline-block;
}

.status-badge.success {
  background-color: var(--success);
  color: white;
}

.status-badge.warning {
  background-color: var(--warning);
  color: var(--dark);
}

.status-badge.danger {
  background-color: var(--danger);
  color: white;
}

.action-btn {
  background: none;
  border: none;
  color: var(--gray);
  cursor: pointer;
  font-size: 1rem;
  transition: var(--transition);
  padding: 0.5rem;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.action-btn:hover {
  background-color: var(--gray-light);
  color: var(--primary);
}

.empty-state {
  text-align: center;
  padding: 3rem 2rem;
  background-color: var(--bg);
  border-radius: 12px;
  margin-top: 1rem;
}

.empty-icon {
  font-size: 3rem;
  color: var(--gray);
  margin-bottom: 1.5rem;
  opacity: 0.7;
}

.empty-state h4 {
  color: var(--dark);
  margin-bottom: 0.5rem;
}

.empty-state p {
  color: var(--gray);
  margin-bottom: 1.5rem;
}

.quick-links {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin-top: 3rem;
}

.link-card {
  background: var(--card);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: var(--shadow);
  transition: var(--transition);
}

.link-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}

.link-card-inner {
  display: block;
  padding: 2rem 1.5rem;
  text-decoration: none;
  color: inherit;
  position: relative;
  overflow: hidden;
}

.link-card-inner::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  height: 100%;
  background: linear-gradient(to bottom, var(--primary), var(--secondary));
  transition: width 0.3s ease;
}

.link-card:hover .link-card-inner::before {
  width: 8px;
}

.link-icon {
  font-size: 2rem;
  color: var(--primary);
  margin-bottom: 1rem;
}

.link-card h4 {
  color: var(--primary);
  margin-bottom: 0.5rem;
  transition: var(--transition);
}

.link-card p {
  color: var(--gray);
  margin-bottom: 1.5rem;
  font-size: 0.95rem;
}

.link-arrow {
  color: var(--primary);
  font-size: 1.2rem;
  transition: var(--transition);
}

.link-card:hover .link-arrow {
  transform: translateX(5px);
}

/* Features Section */
.features-section {
  padding: 6rem 0;
  position: relative;
}

.section-header {
  text-align: center;
  margin-bottom: 3rem;
}

.section-subtitle {
  color: var(--gray);
  font-size: 1.1rem;
  max-width: 700px;
  margin: 0 auto;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  margin-top: 2rem;
}

.feature-card {
  background: var(--card);
  border-radius: 12px;
  padding: 2rem;
  box-shadow: var(--shadow);
  transition: var(--transition);
  position: relative;
  overflow: hidden;
}

.feature-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
}

.feature-icon {
  font-size: 2.5rem;
  color: var(--primary);
  margin-bottom: 1.5rem;
  width: 70px;
  height: 70px;
  background-color: var(--primary-light);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
}

.feature-wave {
  position: absolute;
  bottom: -50px;
  right: -50px;
  width: 150px;
  height: 150px;
  background-color: var(--primary-light);
  border-radius: 50%;
  opacity: 0.3;
  transition: var(--transition);
}

.feature-card:hover .feature-wave {
  transform: scale(1.2);
  opacity: 0.2;
}

/* Market Features */
.market-features {
  padding: 6rem 0;
  background-color: var(--light);
}

.market-tabs {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 2rem;
  justify-content: center;
  flex-wrap: wrap;
}

.market-tab {
  padding: 0.75rem 1.5rem;
  background-color: var(--gray-light);
  border: none;
  border-radius: 50px;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.market-tab.active {
  background-color: var(--primary);
  color: white;
}

.market-tab:hover:not(.active) {
  background-color: #dee2e6;
}

.market-content {
  display: none;
}

.market-content.active {
  display: block;
  animation: fadeIn 0.5s ease;
}

.market-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
}

.market-card {
  background: var(--card);
  padding: 1.5rem;
  border-radius: 12px;
  box-shadow: var(--shadow);
  transition: var(--transition);
}

.market-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}

.stock-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.stock-logo {
  width: 50px;
  height: 50px;
  background-color: var(--primary-light);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--primary);
  font-size: 1.5rem;
}

.stock-symbol {
  color: var(--gray);
  font-size: 0.9rem;
}

.stock-price {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 1rem;
}

.price-change {
  font-size: 0.9rem;
  font-weight: 600;
}

.price-change.positive {
  color: var(--success);
}

.price-change.negative {
  color: var(--danger);
}

.stock-chart {
  height: 60px;
  margin-top: 1rem;
}

.coming-soon {
  text-align: center;
  padding: 4rem 2rem;
  background-color: var(--bg);
  border-radius: 12px;
  margin-top: 1rem;
}

.coming-soon i {
  font-size: 3rem;
  color: var(--gray);
  margin-bottom: 1.5rem;
  opacity: 0.7;
}

.coming-soon h3 {
  margin-bottom: 0.5rem;
}

.notify-btn {
  margin-top: 1.5rem;
}

.notify-btn.success {
  background-color: var(--success);
  color: white;
}

.skeleton-card {
  background: var(--card);
  padding: 1.5rem;
  border-radius: 12px;
  box-shadow: var(--shadow);
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.skeleton-line {
  height: 12px;
  background-color: var(--gray-light);
  border-radius: 6px;
  animation: pulse 1.5s infinite ease-in-out;
}

/* Testimonials */
.testimonials-section {
  padding: 6rem 0;
  background-color: var(--card);
}

.testimonials-slider {
  position: relative;
  max-width: 800px;
  margin: 0 auto;
}

.testimonial-card {
  display: none;
  background: var(--light);
  border-radius: 12px;
  padding: 2rem;
  box-shadow: var(--shadow);
  margin: 0 1rem;
}

.testimonial-card.active {
  display: block;
  animation: fadeIn 0.5s ease;
}

.testimonial-content {
  position: relative;
  margin-bottom: 2rem;
}

.quote-icon {
  position: absolute;
  top: -10px;
  left: -10px;
  font-size: 3rem;
  color: var(--primary-light);
  opacity: 0.7;
}

.testimonial-author {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.author-avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid var(--primary-light);
}

.author-info h4 {
  margin-bottom: 0.25rem;
}

.author-info p {
  color: var(--gray);
  font-size: 0.9rem;
  margin: 0;
}

.slider-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1rem;
  margin-top: 2rem;
}

.slider-prev,
.slider-next {
  background: none;
  border: none;
  color: var(--primary);
  font-size: 1.2rem;
  cursor: pointer;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition);
}

.slider-prev:hover,
.slider-next:hover {
  background-color: var(--primary-light);
}

.slider-dots {
  display: flex;
  gap: 0.5rem;
}

.dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background-color: var(--gray-light);
  cursor: pointer;
  transition: var(--transition);
}

.dot.active {
  background-color: var(--primary);
  transform: scale(1.2);
}

/* CTA Section */
.cta-section {
  padding: 6rem 0;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: white;
  text-align: center;
  position: relative;
}

.cta-section h2 {
  font-size: 2.5rem;
  margin-bottom: 1rem;
}

.cta-subtitle {
  font-size: 1.25rem;
  opacity: 0.9;
  max-width: 700px;
  margin: 0 auto 2rem;
}

.cta-buttons {
  display: flex;
  gap: 1rem;
  justify-content: center;
  flex-wrap: wrap;
}

.cta-wave {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  overflow: hidden;
  line-height: 0;
}

.cta-wave svg {
  position: relative;
  display: block;
  width: calc(100% + 1.3px);
  height: 120px;
}

.cta-wave svg path {
  fill: var(--card);
}

/* Floating Action Button */
.fab-container {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  z-index: 1000;
}

.fab-btn {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background-color: var(--primary);
  color: white;
  border: none;
  font-size: 1.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 4px 20px rgba(58, 128, 186, 0.3);
  transition: var(--transition);
  position: relative;
  z-index: 2;
}

.fab-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 25px rgba(58, 128, 186, 0.4);
}

.fab-btn.pulse {
  animation: pulse 2s infinite;
}

.fab-options {
  position: absolute;
  bottom: 70px;
  right: 0;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  opacity: 0;
  pointer-events: none;
  transform: translateY(20px);
  transition: var(--transition);
}

.fab-container.active .fab-options {
  opacity: 1;
  pointer-events: all;
  transform: translateY(0);
}

.fab-option {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background-color: white;
  color: var(--primary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  transition: var(--transition);
  position: relative;
}

.fab-option:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

.fab-option::after {
  content: attr(data-tooltip);
  position: absolute;
  right: 60px;
  white-space: nowrap;
  background-color: var(--dark);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  font-size: 0.9rem;
  opacity: 0;
  pointer-events: none;
  transition: var(--transition);
}

.fab-option:hover::after {
  opacity: 1;
  right: 70px;
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Responsive */
@media (max-width: 992px) {
  .hero-content h1 {
    font-size: 2.5rem;
  }
  
  .features-grid {
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  }
}

@media (max-width: 768px) {
  .hero-section {
    padding: 4rem 0 6rem;
    text-align: center;
  }
  
  .hero-content {
    flex: 1 1 100%;
  }
  
  .hero-image {
    flex: 1 1 100%;
    margin-top: 2rem;
  }
  
  .hero-buttons {
    justify-content: center;
  }
  
  .stats-summary {
    grid-template-columns: 1fr;
  }
  
  .market-tabs {
    justify-content: flex-start;
    overflow-x: auto;
    padding-bottom: 0.5rem;
  }
  
  .market-tab {
    flex-shrink: 0;
  }
}

@media (max-width: 576px) {
  h1 { font-size: 2rem; }
  h2 { font-size: 1.75rem; }
  
  .hero-content h1 {
    font-size: 2rem;
  }
  
  .hero-content p {
    font-size: 1.1rem;
  }
  
  .btn {
    padding: 0.6rem 1.25rem;
    font-size: 0.9rem;
  }
  
  .testimonial-card {
    padding: 1.5rem;
  }
  
  .fab-container {
    bottom: 1rem;
    right: 1rem;
  }
  .see-more-container {
        text-align: center;
        margin-top: 2rem;
    }
    
    .see-more-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--primary);
        font-weight: 600;
        text-decoration: none;
        transition: var(--transition);
        padding: 0.75rem 1.5rem;
        border: 2px solid var(--primary-light);
        border-radius: 50px;
    }
    
    .see-more-btn:hover {
        background-color: var(--primary-light);
        transform: translateY(-2px);
    }
    
    .fund-category {
        font-size: 0.85rem;
        color: var(--gray);
        margin-top: 0.5rem;
    }
    
    .fund-returns {
        display: flex;
        justify-content: space-between;
        margin-top: 1rem;
    }
    
    .return-item {
        text-align: center;
    }
    
    .return-label {
        font-size: 0.75rem;
        color: var(--gray);
    }
    
    .return-value {
        font-weight: 600;
        margin-top: 0.25rem;
    }
    
    .return-value.positive {
        color: var(--success);
    }
    
    .return-value.negative {
        color: var(--danger);
}
</style>
<body>
    <section class="hero-section">
        <div class="hero-container">
            <div class="hero-content animate__animated animate__fadeInLeft" style="text-align: center;">
                <h1>Take Control of Your <span class="highlight" style="color:#2a5d8a;">Financial Future</span></h1>
                <p>Advanced prediction tools and market insights to help you make smarter investment decisions.</p>
                <div class="hero-buttons">
                    {% if not user.is_authenticated %}
                        <a href="{% url 'signup' %}" class="btn btn-primary pulse-hover">Get Started</a>
                        <a href="{% url 'login' %}" class="btn btn-secondary">Login</a>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="wave-divider">
            <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z" opacity=".25" fill="var(--primary)"></path>
                <path d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z" opacity=".5" fill="var(--primary)"></path>
                <path d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z" fill="var(--primary)"></path>
            </svg>
        </div>
    </section>
    
    {% if user.is_authenticated %}
    <!-- Dashboard Preview Section -->
    <section class="dashboard-preview">
        <div class="container">
            <div class="welcome-header animate__animated animate__fadeIn">
                <h2>Welcome back, <span class="username">{{ user.first_name|default:user.username }}</span>!</h2>
                <p class="subtitle">Your financial overview at a glance</p>
                <div class="date-display">
                    <i class="fas fa-calendar-alt"></i>
                    <span id="current-date"></span>
                </div>
            </div>
            
            <div class="dashboard-container">
                <div class="stats-summary">
                    <div class="stat-card animate__animated animate__fadeInUp" style="animation-delay: 0.1s">
                        <div class="stat-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-content">
                            <h3>Total Predictions</h3>
                            <p class="stat-value counter" data-target="{{ total_predictions }}">0</p>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: {% widthratio total_predictions max_predictions 100 %}%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card animate__animated animate__fadeInUp" style="animation-delay: 0.2s">
                        <div class="stat-icon">
                            <i class="fas fa-piggy-bank"></i>
                        </div>
                        <div class="stat-content">
                            <h3>Avg Savings</h3>
                            <p class="stat-value counter" data-target="{% if avg_savings %}{{ avg_savings|floatformat:0 }}{% else %}0{% endif %}">0%</p>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: {% if avg_savings %}{{ avg_savings|floatformat:0 }}%{% else %}0%{% endif %}"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card animate__animated animate__fadeInUp" style="animation-delay: 0.3s">
                        <div class="stat-icon">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="stat-content">
                            <h3>Total Savings</h3>
                            <p class="stat-value">{% if total_savings %}₹<span class="counter" data-target="{{ total_savings|floatformat:0 }}">0</span>{% else %}N/A{% endif %}</p>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: {% widthratio total_savings max_savings 100 %}%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="recent-activity animate__animated animate__fadeInUp" style="animation-delay: 0.4s">
                    <div class="section-header">
                        <h3><i class="fas fa-history"></i> Recent Predictions</h3>
                        <a href="{% url 'history' %}" class="view-all">View All <i class="fas fa-chevron-right"></i></a>
                    </div>
                    {% if predictions %}
                    <div class="predictions-table-container">
                        <table class="predictions-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Income</th>
                                    <th>Spending</th>
                                    <th>Savings</th>
                                    <th>Status</th>
                                    
                                </tr>
                            </thead>
                            <tbody>
                                {% for pred in predictions %}
                                <tr class="prediction-row" data-id="{{ pred.id }}">
                                    <td>{{ pred.created_at|date:"M d, Y" }}</td>
                                    <td>₹{{ pred.monthly_income|intcomma }}</td>
                                    <td>₹{{ pred.predicted_spending|intcomma }}</td>
                                    <td class="savings-cell">
                                        <span class="savings-amount">₹{{ pred.predicted_savings|intcomma }}</span>
                                        <span class="savings-percent {% if pred.savings_percentage > 20 %}positive{% elif pred.savings_percentage > 10 %}neutral{% else %}negative{% endif %}">
                                            {{ pred.savings_percentage|floatformat:2 }}%
                                        </span>
                                    </td>
                                    <td>
                                        <span class="status-badge {% if pred.savings_percentage > 20 %}success{% elif pred.savings_percentage > 10 %}warning{% else %}danger{% endif %}">
                                            {% if pred.savings_percentage > 20 %}Excellent
                                            {% elif pred.savings_percentage > 10 %}Good
                                            {% else %}Needs Work{% endif %}
                                        </span>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    {% else %}
                    <div class="empty-state animate__animated animate__fadeIn">
                        <div class="empty-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h4>No predictions yet</h4>
                        <p>Start by making your first financial prediction</p>
                        <a href="{% url 'predict' %}" class="btn btn-primary pulse-hover">
                            <i class="fas fa-plus"></i> New Prediction
                        </a>
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="quick-links">
                <div class="link-card animate__animated animate__fadeIn" style="animation-delay: 0.2s">
                    <a href="{% url 'insights' %}" class="link-card-inner">
                        <div class="link-icon">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <h4>Insights</h4>
                        <p>Deep dive into your financial trends.</p>
                        <div class="link-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </a>
                </div>
                <div class="link-card animate__animated animate__fadeIn" style="animation-delay: 0.3s">
                    <a href="{% url 'history' %}" class="link-card-inner">
                        <div class="link-icon">
                            <i class="fas fa-history"></i>
                        </div>
                        <h4>Prediction History</h4>
                        <p>Review your past financial forecasts.</p>
                        <div class="link-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </a>
                </div>
                <div class="link-card animate__animated animate__fadeIn" style="animation-delay: 0.4s">
                    <a href="{% url 'predict' %}" class="link-card-inner">
                        <div class="link-icon">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        <h4>New Prediction</h4>
                        <p>Start your next prediction now.</p>
                        <div class="link-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Main Landing Page Content -->
    <main class="landing-content">
        <!-- Features Section -->
        <section class="features-section">
            <div class="container">
                <div class="section-header animate__animated animate__fadeIn">
                    <h2>Why Choose <span class="highlight">WealthWise</span>?</h2>
                    <p class="section-subtitle">Powerful tools to transform your financial management</p>
                </div>
                <div class="features-grid">
                    <div class="feature-card animate__animated animate__fadeInUp">
                        <div class="feature-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h3>AI-Powered Predictions</h3>
                        <p>Our advanced machine learning models analyze your financial patterns to provide accurate spending and savings forecasts.</p>
                        <div class="feature-wave"></div>
                    </div>
                    <div class="feature-card animate__animated animate__fadeInUp" style="animation-delay: 0.1s">
                        <div class="feature-icon">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <h3>Comprehensive Analytics</h3>
                        <p>Visualize your financial data with interactive charts and actionable insights.</p>
                        <div class="feature-wave"></div>
                    </div>
                    <div class="feature-card animate__animated animate__fadeInUp" style="animation-delay: 0.2s">
                        <div class="feature-icon">
                            <i class="fas fa-bell"></i>
                        </div>
                        <h3>Smart Alerts</h3>
                        <p>Get notified about unusual spending patterns and potential savings opportunities.</p>
                        <div class="feature-wave"></div>
                    </div>
                </div>
            </div>
        </section>
  {% if user.is_authenticated %}
        <!-- Market Features Section -->
        <section class="market-features">
        <div class="container">
            <div class="section-header animate__animated animate__fadeIn">
                <h2>Explore <span class="highlight">Market Insights</span></h2>
                <p class="section-subtitle">Stay ahead with real-time financial data</p>
            </div>
            
            <div class="market-tabs animate__animated animate__fadeIn">
                <button class="market-tab active" data-tab="stocks">
                    <i class="fas fa-chart-line"></i> Stocks
                </button>
                <button class="market-tab" data-tab="crypto">
                    <i class="fab fa-bitcoin"></i> Crypto
                </button>
                <button class="market-tab" data-tab="mutual-funds">
                    <i class="fas fa-hand-holding-usd"></i> Mutual Funds
                </button>
            </div>
            <!-- Stocks Content -->
            <div class="market-content active" id="stocks-content">
                <div class="market-grid">
                    <div class="market-card">
                        <div class="stock-header">
                            <div class="stock-logo">
                                <i class="fab fa-apple"></i>
                            </div>
                            <div>
                                <h4>Apple Inc.</h4>
                                <p class="stock-symbol">AAPL</p>
                            </div>
                        </div>
                        <div class="stock-price">
                            $175.34
                            <span class="price-change positive">
                                +2.34 (1.35%)
                            </span>
                        </div>
                        <div class="stock-chart">
                            <canvas class="mini-chart" width="200" height="60"></canvas>
                        </div>
                    </div>
                    
                    <div class="market-card">
                        <div class="stock-header">
                            <div class="stock-logo">
                                <i class="fab fa-microsoft"></i>
                            </div>
                            <div>
                                <h4>Microsoft Corp.</h4>
                                <p class="stock-symbol">MSFT</p>
                            </div>
                        </div>
                        <div class="stock-price">
                            $328.39
                            <span class="price-change negative">
                                -1.25 (0.38%)
                            </span>
                        </div>
                        <div class="stock-chart">
                            <canvas class="mini-chart" width="200" height="60"></canvas>
                        </div>
                    </div>
                    
                    <div class="market-card">
                        <div class="stock-header">
                            <div class="stock-logo">
                                <i class="fab fa-google"></i>
                            </div>
                            <div>
                                <h4>Alphabet Inc.</h4>
                                <p class="stock-symbol">GOOGL</p>
                            </div>
                        </div>
                        <div class="stock-price">
                            $135.28
                            <span class="price-change positive">
                                +3.42 (2.59%)
                            </span>
                        </div>
                        <div class="stock-chart">
                            <canvas class="mini-chart" width="200" height="60"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="see-more-container">
                    <a href="{% url 'stocks' %}" class="see-more-btn">
                        View All  <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
            
            <!-- Crypto Content -->
            <div class="market-content" id="crypto-content">
                <div class="market-grid">
                    <div class="market-card">
                        <div class="stock-header">
                            <div class="stock-logo">
                                <i class="fab fa-bitcoin"></i>
                            </div>
                            <div>
                                <h4>Bitcoin</h4>
                                <p class="stock-symbol">BTC</p>
                            </div>
                        </div>
                        <div class="stock-price">
                            $42,356.78
                            <span class="price-change positive">
                                +1,254.32 (3.05%)
                            </span>
                        </div>
                        <div class="stock-chart">
                            <canvas class="mini-chart" width="200" height="60"></canvas>
                        </div>
                    </div>
                    
                    <div class="market-card">
                        <div class="stock-header">
                            <div class="stock-logo">
                                <i class="fab fa-ethereum"></i>
                            </div>
                            <div>
                                <h4>Ethereum</h4>
                                <p class="stock-symbol">ETH</p>
                            </div>
                        </div>
                        <div class="stock-price">
                            $2,278.41
                            <span class="price-change negative">
                                -32.15 (1.39%)
                            </span>
                        </div>
                        <div class="stock-chart">
                            <canvas class="mini-chart" width="200" height="60"></canvas>
                        </div>
                    </div>
                    
                    <div class="market-card">
                        <div class="stock-header">
                            <div class="stock-logo">
                                <i class="fas fa-coins"></i>
                            </div>
                            <div>
                                <h4>Solana</h4>
                                <p class="stock-symbol">SOL</p>
                            </div>
                        </div>
                        <div class="stock-price">
                            $102.67
                            <span class="price-change positive">
                                +8.42 (8.93%)
                            </span>
                        </div>
                        <div class="stock-chart">
                            <canvas class="mini-chart" width="200" height="60"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="see-more-container">
                    <a href="{% url 'explore_crypto' %}" class="see-more-btn">
                        View All <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
            
            <!-- Mutual Funds Content -->
            <div class="market-content" id="mutual-funds-content">
                <div class="market-grid">
                    <div class="market-card">
                        <div class="stock-header">
                            <div class="stock-logo">
                                <i class="fas fa-chart-pie"></i>
                            </div>
                            <div>
                                <h4>Blue Chip Growth Fund</h4>
                                <p class="stock-symbol">BCGFX</p>
                                <p class="fund-category">Large Cap Growth</p>
                            </div>
                        </div>
                        <div class="stock-price">
                            $245.67
                            <span class="price-change positive">
                                +1.23 (0.50%)
                            </span>
                        </div>
                        <div class="fund-returns">
                            <div class="return-item">
                                <div class="return-label">1Y Return</div>
                                <div class="return-value positive">+18.5%</div>
                            </div>
                            <div class="return-item">
                                <div class="return-label">3Y Return</div>
                                <div class="return-value positive">+12.2%</div>
                            </div>
                            <div class="return-item">
                                <div class="return-label">5Y Return</div>
                                <div class="return-value positive">+15.7%</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="market-card">
                        <div class="stock-header">
                            <div class="stock-logo">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div>
                                <h4>Conservative Income Fund</h4>
                                <p class="stock-symbol">CIFX</p>
                                <p class="fund-category">Fixed Income</p>
                            </div>
                        </div>
                        <div class="stock-price">
                            $56.89
                            <span class="price-change positive">
                                +0.12 (0.21%)
                            </span>
                        </div>
                        <div class="fund-returns">
                            <div class="return-item">
                                <div class="return-label">1Y Return</div>
                                <div class="return-value positive">+5.2%</div>
                            </div>
                            <div class="return-item">
                                <div class="return-label">3Y Return</div>
                                <div class="return-value positive">+4.8%</div>
                            </div>
                            <div class="return-item">
                                <div class="return-label">5Y Return</div>
                                <div class="return-value positive">+5.1%</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="market-card">
                        <div class="stock-header">
                            <div class="stock-logo">
                                <i class="fas fa-globe-asia"></i>
                            </div>
                            <div>
                                <h4>Emerging Markets Fund</h4>
                                <p class="stock-symbol">EMFX</p>
                                <p class="fund-category">International</p>
                            </div>
                        </div>
                        <div class="stock-price">
                            $78.34
                            <span class="price-change negative">
                                -0.45 (0.57%)
                            </span>
                        </div>
                        <div class="fund-returns">
                            <div class="return-item">
                                <div class="return-label">1Y Return</div>
                                <div class="return-value negative">-2.3%</div>
                            </div>
                            <div class="return-item">
                                <div class="return-label">3Y Return</div>
                                <div class="return-value positive">+8.7%</div>
                            </div>
                            <div class="return-item">
                                <div class="return-label">5Y Return</div>
                                <div class="return-value positive">+10.4%</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="see-more-container">
                    <a href="{% url 'mutual_funds_list' %}" class="see-more-btn">
                    View All  <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>
    </section>
{% endif %}
        <!-- Testimonials Section -->
        <section class="testimonials-section">
            <div class="container">
                <div class="section-header animate__animated animate__fadeIn">
                    <h2>What Our <span class="highlight">Users Say</span></h2>
                    <p class="section-subtitle">Trusted by thousands of investors</p>
                </div>
                
                <div class="testimonials-slider">
                    <div class="testimonial-card active">
                        <div class="testimonial-content">
                            <div class="quote-icon">
                                <i class="fas fa-quote-left"></i>
                            </div>
                            <p>"WealthWise has completely transformed how I manage my finances. The predictions are incredibly accurate and have helped me save 30% more this year."</p>
                        </div>
                        <div class="testimonial-author">
                            <div class="author-info">
                                <h4>Sarah Johnson</h4>
                                <p>Financial Analyst, 3 years using WealthWise</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="testimonial-card">
                        <div class="testimonial-content">
                            <div class="quote-icon">
                                <i class="fas fa-quote-left"></i>
                            </div>
                            <p>"The stock insights are invaluable. I've made better investment decisions in the past 6 months than in my previous 5 years of trading."</p>
                        </div>
                        <div class="testimonial-author">
                            <div class="author-info">
                                <h4>Michael Chen</h4>
                                <p>Day Trader, 6 months using WealthWise</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="testimonial-card">
                        <div class="testimonial-content">
                            <div class="quote-icon">
                                <i class="fas fa-quote-left"></i>
                            </div>
                            <p>"As a small business owner, the spending predictions have helped me optimize cash flow and reduce unnecessary expenses."</p>
                        </div>
                        <div class="testimonial-author">
                            <div class="author-info">
                                <h4>David Rodriguez</h4>
                                <p>Small Business Owner, 1 year using WealthWise</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="slider-controls">
                        <button class="slider-prev"><i class="fas fa-chevron-left"></i></button>
                        <div class="slider-dots">
                            <span class="dot active"></span>
                            <span class="dot"></span>
                            <span class="dot"></span>
                        </div>
                        <button class="slider-next"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="cta-section">
            <div class="container animate__animated animate__fadeIn">
                <h2>Ready to Transform Your <span class="highlight">Financial Future</span>?</h2>
                <p class="cta-subtitle">Join thousands of users who are making smarter financial decisions with WealthWise.</p>
                <div class="cta-buttons">
                    <a href="{% url 'signup' %}" class="btn btn-primary pulse-hover">Start Free Trial</a>
                    <a href="#features" class="btn btn-secondary">Learn More</a>
                </div>
            </div>
            <div class="cta-wave">
                <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
                    <path d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z" opacity=".25" fill="var(--primary)"></path>
                    <path d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z" opacity=".5" fill="var(--primary)"></path>
                    <path d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z" fill="var(--primary)"></path>
                </svg>
            </div>
        </section>
    </main>

    <!-- Floating Action Button -->
    <div class="fab-container">
        <button class="fab-btn pulse">
            <i class="fas fa-question"></i>
        </button>
        <div class="fab-options">
            <a href="#" class="fab-option" data-tooltip="Contact Support">
                <i class="fas fa-headset"></i>
            </a>
            <a href="#" class="fab-option" data-tooltip="FAQs">
                <i class="fas fa-question-circle"></i>
            </a>
            <a href="#" class="fab-option" data-tooltip="Feedback">
                <i class="fas fa-comment-dots"></i>
            </a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
    // Current Date Display
    document.addEventListener('DOMContentLoaded', function() {
        const now = new Date();
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('current-date').textContent = now.toLocaleDateString('en-US', options);

        // Initialize all functionality
        initCounters();
        initIntersectionObserver();
        initMarketTabs();
        initTestimonialSlider();
        initFloatingActionButton();
        initPulseButtons();
        initPredictionRowClick();
        initNotifyButton();
        
        // Load initial data if stocks tab is active
        if (document.querySelector('.market-tab.active')?.dataset.tab === 'stocks') {
            loadStockData();
            window.stocksLoaded = true;
        }
    });

    // Counter Animation
    function initCounters() {
        const counters = document.querySelectorAll('.counter');
        const speed = 200;

        function animateCounters() {
            counters.forEach(counter => {
                const target = +counter.getAttribute('data-target');
                const count = +counter.innerText;
                const increment = target / speed;
                
                if (count < target) {
                    counter.innerText = Math.ceil(count + increment);
                    setTimeout(animateCounters, 1);
                } else {
                    counter.innerText = target;
                }
            });
        }

        animateCounters();
    }

    // Intersection Observer for animations
    function initIntersectionObserver() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate__animated', 'animate__fadeInUp');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.animate__animated').forEach(el => {
            observer.observe(el);
        });
    }

    // Market Tabs Functionality
    function initMarketTabs() {
        document.querySelectorAll('.market-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;
                
                // Update tabs
                document.querySelectorAll('.market-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Update content
                document.querySelectorAll('.market-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(`${tabName}-content`).classList.add('active');
                
                // Load data if not already loaded
                if (tabName === 'stocks' && !window.stocksLoaded) {
                    loadStockData();
                    window.stocksLoaded = true;
                } else if (tabName === 'crypto' && !window.cryptoLoaded) {
                    loadCryptoData();
                    window.cryptoLoaded = true;
                } else if (tabName === 'mutual-funds' && !window.fundsLoaded) {
                    loadMutualFundsData();
                    window.fundsLoaded = true;
                }
            });
        });
    }

    // Stock Data (simulated API call)
    function loadStockData() {
        const stocks = [
            { symbol: 'AAPL', name: 'Apple Inc.', price: 175.34, change: 2.34, changePercent: 1.35, logo: 'apple' },
            { symbol: 'MSFT', name: 'Microsoft Corp.', price: 328.39, change: -1.25, changePercent: -0.38, logo: 'microsoft' },
            { symbol: 'GOOGL', name: 'Alphabet Inc.', price: 135.28, change: 3.42, changePercent: 2.59, logo: 'google' }
        ];
        
        const grid = document.querySelector('#stocks-content .market-grid');
        grid.innerHTML = '';
        
        stocks.forEach(stock => {
            const card = document.createElement('div');
            card.className = 'market-card animate__animated animate__fadeIn';
            card.innerHTML = `
                <div class="stock-header">
                    <div class="stock-logo">
                        <i class="fab fa-${stock.logo}"></i>
                    </div>
                    <div>
                        <h4>${stock.name}</h4>
                        <p class="stock-symbol">${stock.symbol}</p>
                    </div>
                </div>
                <div class="stock-price">
                    $${stock.price.toFixed(2)}
                    <span class="price-change ${stock.change >= 0 ? 'positive' : 'negative'}">
                        ${stock.change >= 0 ? '+' : ''}${stock.change.toFixed(2)} (${stock.changePercent.toFixed(2)}%)
                    </span>
                </div>
                <div class="stock-chart">
                    <canvas class="mini-chart" width="200" height="60"></canvas>
                </div>
            `;
            grid.appendChild(card);
            
            // Initialize chart
            setTimeout(() => {
                const canvas = card.querySelector('.mini-chart');
                const ctx = canvas.getContext('2d');
                const data = generateRandomChartData(10, stock.price, stock.changePercent);
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: Array(10).fill(''),
                        datasets: [{
                            data: data,
                            borderColor: stock.change >= 0 ? '#4CAF50' : '#F44336',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4,
                            pointRadius: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: { x: { display: false }, y: { display: false } }
                    }
                });
            }, 200);
        });
        
        // Show "See More" button
        const seeMoreContainer = document.querySelector('#stocks-content .see-more-container');
        seeMoreContainer.style.display = 'block';
    }

    // Crypto Data (simulated API call)
    function loadCryptoData() {
        const cryptos = [
            { symbol: 'BTC', name: 'Bitcoin', price: 42356.78, change: 1254.32, changePercent: 3.05, logo: 'bitcoin' },
            { symbol: 'ETH', name: 'Ethereum', price: 2278.41, change: -32.15, changePercent: -1.39, logo: 'ethereum' },
            { symbol: 'SOL', name: 'Solana', price: 102.67, change: 8.42, changePercent: 8.93, logo: 'money-bill-wave' }
        ];
        
        const grid = document.querySelector('#crypto-content .market-grid');
        grid.innerHTML = '';
        
        cryptos.forEach(crypto => {
            const card = document.createElement('div');
            card.className = 'market-card animate__animated animate__fadeIn';
            card.innerHTML = `
                <div class="stock-header">
                    <div class="stock-logo">
                        <i class="fab fa-${crypto.logo}"></i>
                    </div>
                    <div>
                        <h4>${crypto.name}</h4>
                        <p class="stock-symbol">${crypto.symbol}</p>
                    </div>
                </div>
                <div class="stock-price">
                    $${crypto.price.toFixed(2)}
                    <span class="price-change ${crypto.change >= 0 ? 'positive' : 'negative'}">
                        ${crypto.change >= 0 ? '+' : ''}${crypto.change.toFixed(2)} (${crypto.changePercent.toFixed(2)}%)
                    </span>
                </div>
                <div class="stock-chart">
                    <canvas class="mini-chart" width="200" height="60"></canvas>
                </div>
            `;
            grid.appendChild(card);
            
            // Initialize chart
            setTimeout(() => {
                const canvas = card.querySelector('.mini-chart');
                const ctx = canvas.getContext('2d');
                const data = generateRandomChartData(10, crypto.price, crypto.changePercent);
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: Array(10).fill(''),
                        datasets: [{
                            data: data,
                            borderColor: crypto.change >= 0 ? '#4CAF50' : '#F44336',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4,
                            pointRadius: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: { x: { display: false }, y: { display: false } }
                    }
                });
            }, 200);
        });
        
        // Show "See More" button
        const seeMoreContainer = document.querySelector('#crypto-content .see-more-container');
        seeMoreContainer.style.display = 'block';
    }

    // Mutual Funds Data (simulated API call)
    function loadMutualFundsData() {
        const funds = [
            { 
                symbol: 'BCGFX', 
                name: 'Blue Chip Growth Fund', 
                price: 245.67, 
                change: 1.23, 
                changePercent: 0.50,
                category: 'Large Cap Growth',
                returns: {
                    oneYear: 18.5,
                    threeYear: 12.2,
                    fiveYear: 15.7
                }
            },
            { 
                symbol: 'CIFX', 
                name: 'Conservative Income Fund', 
                price: 56.89, 
                change: 0.12, 
                changePercent: 0.21,
                category: 'Fixed Income',
                returns: {
                    oneYear: 5.2,
                    threeYear: 4.8,
                    fiveYear: 5.1
                }
            },
            { 
                symbol: 'EMFX', 
                name: 'Emerging Markets Fund', 
                price: 78.34, 
                change: -0.45, 
                changePercent: -0.57,
                category: 'International',
                returns: {
                    oneYear: -2.3,
                    threeYear: 8.7,
                    fiveYear: 10.4
                }
            }
        ];
        
        const grid = document.querySelector('#mutual-funds-content .market-grid');
        grid.innerHTML = '';
        
        funds.forEach(fund => {
            const card = document.createElement('div');
            card.className = 'market-card animate__animated animate__fadeIn';
            card.innerHTML = `
                <div class="stock-header">
                    <div class="stock-logo">
                        <i class="fas fa-chart-pie"></i>
                    </div>
                    <div>
                        <h4>${fund.name}</h4>
                        <p class="stock-symbol">${fund.symbol}</p>
                        <p class="fund-category">${fund.category}</p>
                    </div>
                </div>
                <div class="stock-price">
                    $${fund.price.toFixed(2)}
                    <span class="price-change ${fund.change >= 0 ? 'positive' : 'negative'}">
                        ${fund.change >= 0 ? '+' : ''}${fund.change.toFixed(2)} (${fund.changePercent.toFixed(2)}%)
                    </span>
                </div>
                <div class="fund-returns">
                    <div class="return-item">
                        <div class="return-label">1Y Return</div>
                        <div class="return-value ${fund.returns.oneYear >= 0 ? 'positive' : 'negative'}">
                            ${fund.returns.oneYear >= 0 ? '+' : ''}${fund.returns.oneYear}%
                        </div>
                    </div>
                    <div class="return-item">
                        <div class="return-label">3Y Return</div>
                        <div class="return-value ${fund.returns.threeYear >= 0 ? 'positive' : 'negative'}">
                            ${fund.returns.threeYear >= 0 ? '+' : ''}${fund.returns.threeYear}%
                        </div>
                    </div>
                    <div class="return-item">
                        <div class="return-label">5Y Return</div>
                        <div class="return-value ${fund.returns.fiveYear >= 0 ? 'positive' : 'negative'}">
                            ${fund.returns.fiveYear >= 0 ? '+' : ''}${fund.returns.fiveYear}%
                        </div>
                    </div>
                </div>
            `;
            grid.appendChild(card);
        });
        
        // Show "See More" button
        const seeMoreContainer = document.querySelector('#mutual-funds-content .see-more-container');
        seeMoreContainer.style.display = 'block';
    }

    // Generate random chart data
    function generateRandomChartData(count, basePrice, volatility) {
        const data = [basePrice];
        for (let i = 1; i < count; i++) {
            const change = (Math.random() * volatility * 2 - volatility) / 100;
            data.push(data[i-1] * (1 + change));
        }
        return data;
    }

    // Testimonial Slider
    function initTestimonialSlider() {
        let currentTestimonial = 0;
        const testimonials = document.querySelectorAll('.testimonial-card');
        const dots = document.querySelectorAll('.dot');

        function showTestimonial(index) {
            testimonials.forEach(testimonial => testimonial.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));
            
            testimonials[index].classList.add('active');
            dots[index].classList.add('active');
            currentTestimonial = index;
        }

        document.querySelector('.slider-next')?.addEventListener('click', () => {
            let nextIndex = (currentTestimonial + 1) % testimonials.length;
            showTestimonial(nextIndex);
        });

        document.querySelector('.slider-prev')?.addEventListener('click', () => {
            let prevIndex = (currentTestimonial - 1 + testimonials.length) % testimonials.length;
            showTestimonial(prevIndex);
        });

        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => showTestimonial(index));
        });

        // Auto-rotate testimonials
        setInterval(() => {
            let nextIndex = (currentTestimonial + 1) % testimonials.length;
            showTestimonial(nextIndex);
        }, 5000);
    }

    // Floating Action Button
    function initFloatingActionButton() {
        const fabBtn = document.querySelector('.fab-btn');
        if (fabBtn) {
            fabBtn.addEventListener('click', () => {
                document.querySelector('.fab-container').classList.toggle('active');
            });
        }
    }

    // Pulse animation for buttons
    function initPulseButtons() {
        document.querySelectorAll('.pulse-hover').forEach(btn => {
            btn.addEventListener('mouseenter', () => {
                btn.classList.add('animate__animated', 'animate__pulse');
            });
            btn.addEventListener('animationend', () => {
                btn.classList.remove('animate__animated', 'animate__pulse');
            });
        });
    }

    // Prediction row click handler
    function initPredictionRowClick() {
        document.querySelectorAll('.prediction-row').forEach(row => {
            row.addEventListener('click', (e) => {
                if (!e.target.closest('.action-btn')) {
                    const id = row.getAttribute('data-id');
                    window.location.href = `/prediction/${id}/`;
                }
            });
        });
    }

    // Notify button
    function initNotifyButton() {
        document.querySelector('.notify-btn')?.addEventListener('click', () => {
            const btn = document.querySelector('.notify-btn');
            btn.innerHTML = '<i class="fas fa-check"></i> Notification Requested';
            btn.classList.add('success');
            
            setTimeout(() => {
                btn.innerHTML = '<i class="fas fa-bell"></i> Notify Me When Ready';
                btn.classList.remove('success');
            }, 3000);
        });
    }
</script>
</body>
</html>
{% endblock %}